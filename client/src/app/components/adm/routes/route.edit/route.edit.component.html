<div class="card" style="margin:15px;">
    <div class="card-header">
        <b>Editar recorrido</b>
    </div>
    <div class="card-body">
        <div class="form-group">
            <span class="input-group-addon">Nombre:</span>
            <input type="text" class="form-control" *ngIf="currentRoute" [(ngModel)]="currentRoute.name">
            <span class="input-group-addon">Usuario:</span>
            <select class="form-control" *ngIf="currentRoute" [(ngModel)]="currentRoute.user" [compareWith]="compareUser">
                <option *ngFor="let u of users" [ngValue]="u">{{u.firstname}} {{u.lastname}}</option>
            </select>
            <span class="input-group-addon">Fecha:</span>

            <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="currentRoute.date" ngbDatepicker #d="ngbDatepicker">
                <div class="input-group-btn">
                    <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                        <img src="img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;" />
                    </button>
                </div>
            </div>
            
            <span class="input-group-addon">Punto de venta:</span>
            <div class="input-group">
                <select class="form-control" *ngIf="currentRoute" [(ngModel)]="POSSelected">
                    <option *ngFor="let pos of pointsOfSales" [ngValue]="pos">{{pos.name}}</option>
                </select>
                <div class="input-group-btn">
                    <button type="button" class="btn btn-primary" (click)="agregarPuntoDeVenta()">Agregar</button>
                </div>
            </div>

            <span class="input-group-addon">Plantilla Recorrido:</span>
            <div class="input-group">
                <select class="form-control" [(ngModel)]="idTemplate">
                    <option *ngFor="let tr of templatesRoutes" [ngValue]="tr.id">{{tr.name}}</option>
                </select>
                <div class="input-group-btn">
                    <button type="button" class="btn btn-primary" (click)="addTemplate()">Agregar</button>
                </div>
            </div>
        </div>
        <div class="card" *ngIf="currentRoute">
            <div class="card-header">
                Puntos de venta
            </div>
            <div class="card-body">
                <table class="table">
                    <tr>
                        <td style="width: 15px;"></td>
                        <td>Nombre</td>
                        <td>Eliminar</td>
                    </tr>
                    <tr *ngFor="let i of currentRoute.pointsOfSale">
                        <td>
                            <span class="fa fa-arrow-circle-up" (click)="changeOrder(i.id,i.position, i.position - 1)" *ngIf="i.position !== 1"></span>
                            <span class="fa fa-arrow-circle-down" (click)="changeOrder(i.id,i.position,i.position + 1)" *ngIf="i.position !== currentRoute.pointsOfSale.length"></span>
                        </td>
                        <td>{{i.name}}</td>
                        <td>
                            <a (click)="remove(i.id)">
                                <i class="fa fa-trash-o" style="font-size: 1.7em;"></i>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <button type="button" class="btn btn-primary" (click)="actualizar()">Actualizar</button>
        <button type="button" class="btn btn-light" routerLink="/recorridos">Cancelar</button>
    </div>
</div>